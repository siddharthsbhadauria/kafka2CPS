stages:
  - build
  - deploy

variables:
  AZURE_FUNCTION_APP_NAME: "your-function-app-name"
  AZURE_RESOURCE_GROUP: "your-resource-group"
  AZURE_LOCATION: "your-location"

before_script:
  - apt-get update -qy
  - apt-get install -y python3-pip
  - pip3 install -r requirements.txt  # Replace with the actual path to your requirements file

build:
  stage: build
  script:
    - echo "Building your Python project..."

deploy:
  stage: deploy
  script:
    - az login --service-principal -u $AZURE_CLIENT_ID -p $AZURE_CLIENT_SECRET --tenant $AZURE_TENANT_ID
    - az functionapp deployment source config --name $AZURE_FUNCTION_APP_NAME --resource-group $AZURE_RESOURCE_GROUP --branch $CI_COMMIT_REF_NAME --repository-url $CI_REPOSITORY_URL
